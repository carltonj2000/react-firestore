(this["webpackJsonpreact-firestore"]=this["webpackJsonpreact-firestore"]||[]).push([[0],{80:function(e,t,a){e.exports=a(98)},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),i=a(18),s=a(29),l=a(74),u=a(141),m=a(142),p=a(68),d=a(133),f=a(134),E=a(50),b=a(135),h=a(71),g=a.n(h),v=a(16),j=a(131),N=a(7),O=a.n(N),x=a(14),T=a(15),w=a(20),k=a(40),I=a.n(k),R=(a(86),a(90),{apiKey:"AIzaSyDo1TULKY-libV004CcUfynxkL8R2GqaBk",authDomain:"sophie-champagne.firebaseapp.com",databaseURL:"https://sophie-champagne.firebaseio.com",projectId:"sophie-champagne",storageBucket:"sophie-champagne.appspot.com",messagingSenderId:"172496630132",appId:"1:172496630132:web:6dfa4d172e603384cbbc21"});I.a.initializeApp(R);var C=I.a.firestore(),y=I.a.auth(),A=function(){return C.collection("projects").get().then((function(e){var t={};return e.forEach((function(e){return t[e.id]=e.data()})),t}))},P=function(e){return C.collection("projects").add(e)},S=function(e){return C.collection("projects").doc(e).delete()},_=function(e,t){return C.collection("projects").doc(t).set(e)},L=function(e){return y.onAuthStateChanged(e)},D=function(e){return y.createUserWithEmailAndPassword(e.email,e.password).then((function(t){return C.collection("users").doc(t.user.uid).set(e)}))},U=function(e){return y.signInWithEmailAndPassword(e.email,e.password)},G=function(){return y.signOut()},Z=function(e){return C.collection("users").doc(e).get().then((function(e){return e.data()}))},q=function(e){return I.a.firestore.Timestamp.fromDate(e)},F=function(e){return C.collection("notifications").orderBy("time","desc").limit(3).onSnapshot((function(t){var a=[];return t.forEach((function(e){var t=e.data();a.push(Object(w.a)({},t,{uid:e.id}))})),e(a),a}))},J={user:null,redirect:!1,error:null,s:"UNINITIALIZED_STATE",showNavLinks:!1,showSignedInLinks:!1},$=r.a.createContext(J),B=$.Provider,z=function(e,t){switch(t.type){case"FS_STATE_CHANGED":var a=e.redirect,n=e.s;return t.user?(n="INITIALIZED_STATE",a=!1):"LOGGING_OUT"!==e.s&&"UNINITIALIZED_STATE"!==e.s||(n="INITIALIZED_STATE",a=!0),Object(w.a)({},e,{user:t.user,showNavLinks:!0,error:null,showSignedInLinks:!!t.user,s:n,redirect:a});case"LOGGING_OUT":return Object(w.a)({},e,{s:t.type,redirect:!0,user:null});case"CREATING_USER":case"LOGGING_IN":return Object(w.a)({},e,{s:t.type,redirect:!1});case"UPDATE_PROFILE":return Object(w.a)({},e,{user:Object(w.a)({},e.user,{},t.user)});case"ERROR":return Object(w.a)({},e,{error:t.error});default:throw new Error}},W=function(e){var t=e.children,a=r.a.useReducer(z,J),n=Object(T.a)(a,2),c=n[0],o=n[1];r.a.useEffect((function(){return L(function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,Z(t.uid);case 4:a=e.sent,o({type:"FS_STATE_CHANGED",user:Object(w.a)({},a,{uid:t.uid})}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:e.next=13;break;case 12:o({type:"FS_STATE_CHANGED",user:null});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var i=r.a.useCallback(function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"CREATING_USER",user:t}),e.prev=1,e.next=4,D(t);case 4:a=e.sent,o({type:"UPDATE_PROFILE",user:a.user}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"ERROR",error:"Create user failed! ".concat(e.t0.message)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),s=r.a.useCallback(function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"LOGGING_IN"}),e.next=3,U(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),l=r.a.useCallback(Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"LOGGING_OUT"}),e.next=3,G();case 3:case"end":return e.stop()}}),e)}))),[]);return r.a.createElement(B,{value:{auth:c,states:{UNINITIALIZED_STATE:"UNINITIALIZED_STATE"},createUser:i,loginUser:s,logoutUser:l}},t)},H=Object(p.a)((function(e){return{user:{flexGrow:1,textDecoration:"none",color:"inherit",background:"pink",borderRadius:e.shape.borderRadius,backgroundColor:Object(v.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(v.b)(e.palette.common.white,.25)},padding:e.spacing(1)}}})),V=function(){var e=H(),t=Object(s.g)(),a=r.a.useContext($),n=a.auth,c=a.logoutUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"inherit",component:i.c,to:"/createproject"},"New Project"),r.a.createElement(j.a,{color:"inherit",onClick:function(){c(),t.push("/signin")}},"Log Out"),r.a.createElement(E.a,{variant:"body1",className:e.user,component:i.c,to:"/"},n.user&&n.user.firstName,n.user&&n.user.lastName[0]))},K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"inherit",component:i.c,to:"/signin"},"Sign In"),r.a.createElement(j.a,{color:"inherit",component:i.c,to:"/signup"},"Sign Up"))},Y=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textDecoration:"none",color:"inherit"}}})),M=function(){var e=Y(),t=r.a.useContext($).auth;return r.a.createElement("div",{className:e.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(b.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(g.a,null)),r.a.createElement(E.a,{variant:"h6",className:e.title,component:i.b,to:"/"},"Sophie And Champagne"),r.a.createElement("div",null,t.showNavLinks?t.showSignedInLinks?r.a.createElement(V,null):r.a.createElement(K,null):null))))},Q=a(33),X=a(100),ee=a(143),te=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2),margin:e.spacing(1)},form:{display:"flex",flexDirection:"column"},input:{width:300},button:{marginTop:e.spacing(1),backgroundColor:Object(v.b)(e.palette.common.black,.1),"&:hover":{backgroundColor:Object(v.b)(e.palette.common.black,.25)}}}})),ae=function(){var e=te(),t=Object(s.g)(),a=Object(Q.a)(),n=a.handleSubmit,c=a.register,o=a.errors,i=r.a.useContext($),l=i.auth,u=i.states,m=i.loginUser;return l.s===u.UNINITIALIZED_STATE?null:l.user?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement(X.a,{className:e.paper},r.a.createElement(E.a,{variant:"h4"},"Sign In"),r.a.createElement("form",{onSubmit:n((function(e){m(e),t.push("/")})),className:e.form},r.a.createElement(ee.a,{label:"Email",className:e.input,inputProps:{name:"email"},inputRef:c({required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid Email!"}}),helperText:o.email?o.email.message:null}),r.a.createElement(ee.a,{label:"Password",className:e.input,inputProps:{name:"password"},inputRef:c({required:"Required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*#?&])[a-zA-Z\d@$!%*#?&]{8,}$/,message:"Pw 8+ chars, 1+ dig, 1+ ucase, 1+ lcase!, 1+ special ch"}}),helperText:o.password?o.password.message:null}),r.a.createElement(j.a,{color:"inherit",type:"submit",className:e.button},"Submit"))))},ne=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2),margin:e.spacing(1)},form:{display:"flex",flexDirection:"column"},input:{width:300},button:{marginTop:e.spacing(1),backgroundColor:Object(v.b)(e.palette.common.black,.1),"&:hover":{backgroundColor:Object(v.b)(e.palette.common.black,.25)}}}})),re=function(){var e=ne(),t=Object(Q.a)(),a=t.handleSubmit,n=t.register,c=t.errors,o=Object(s.g)(),i=r.a.useContext($),l=i.auth,u=i.states,m=i.createUser;return l.s===u.UNINITIALIZED_STATE?null:l.user?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement(X.a,{className:e.paper},r.a.createElement(E.a,{variant:"h4"},"Sign Up"),r.a.createElement("form",{onSubmit:a((function(e){m(e),o.push("/")})),className:e.form},r.a.createElement(ee.a,{label:"First Name",className:e.input,inputProps:{name:"firstName"},inputRef:n({required:"Required",pattern:{value:/^[A-Z]{1,}$/i,message:"First Name Required!"}}),helperText:c.firstName?c.firstName.message:null})," ",r.a.createElement(ee.a,{label:"Last Name",className:e.input,inputProps:{name:"lastName"},inputRef:n({required:"Required",pattern:{value:/^[A-Z]{1,}$/i,message:"Last Name Required!"}}),helperText:c.lastName?c.lastName.message:null}),r.a.createElement(ee.a,{label:"Email",className:e.input,inputProps:{name:"email"},inputRef:n({required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid Email!"}}),helperText:c.email?c.email.message:null}),r.a.createElement(ee.a,{label:"Password",className:e.input,inputProps:{name:"password"},inputRef:n({required:"Required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*#?&])[a-zA-Z\d@$!%*#?&]{8,}$/,message:"Password 8+ chars, 1+ digit, 1+ ucase, 1+ lcase!"}}),helperText:c.password?c.password.message:null}),r.a.createElement(j.a,{color:"inherit",type:"submit",className:e.button},"Submit"))))},ce=a(34),oe=a.n(ce),ie=a(136),se=a(137),le=a(138),ue=Object(p.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(2)}}})),me=function(){var e=ue(),t=r.a.useState([]),a=Object(T.a)(t,2),n=a[0],c=a[1];return r.a.useEffect((function(){return F(c)}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(E.a,{variant:"h4"},"Notifications "),r.a.createElement(ie.a,null,n&&n.map((function(t){return r.a.createElement(se.a,{key:t.uid,alignItems:"flex-start"},r.a.createElement(le.a,{primary:t.user,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary"},t.content)," "+oe()(t.time.toDate()).fromNow())}))}))))},pe=a(139),de=a(72),fe=a.n(de),Ee=a(73),be=a.n(Ee),he={},ge=Object(n.createContext)(he),ve=ge.Provider,je=function(e,t){switch(t.type){case"SET_PROJECTS":return t.projects;case"CREATE_PROJECT":return e[t.uid]=t.project,e;case"CREATE_PROJECT_ERROR":return e.CREATE_PROJECT_ERROR=t.error,e;case"DELETE_PROJECT":return Object.keys(e).reduce((function(a,n){return e[n].uid!==t.uid&&(a[n]=e[n]),a}),{});case"UPDATE_PROJECT":return e[t.uid]=t.project,e;default:throw new Error}},Ne=function(e){var t=e.children,a=r.a.useReducer(je,he),n=Object(T.a)(a,2),c=n[0],o=n[1],i=r.a.useCallback(Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,o({type:"SET_PROJECTS",projects:t});case 4:case"end":return e.stop()}}),e)}))),[]),s=r.a.useCallback(function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:o({type:"DELETE_PROJECT",uid:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),l=r.a.useCallback(function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.createdAt=q(new Date),t.authorFirstName=a.firstName,t.authorLastName=a.lastName,e.next=6,P(t);case 6:n=e.sent,o({type:"CREATE_PROJECT",project:t,uid:n.id}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o({type:"CREATE_PROJECT_ERROR",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),[]),u=r.a.useCallback(function(){var e=Object(x.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,a);case 2:o({type:"UPDATE_PROJECT",project:t,uid:a});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[]);return r.a.createElement(ve,{value:{projects:c,createProject:l,getProjects:i,deleteProject:s,updateProject:u}},t)},Oe=Object(p.a)((function(e){return{item:{padding:e.spacing(2),margin:e.spacing(1)},date:{color:Object(v.b)(e.palette.common.black,.5)}}})),xe=function(e){var t,a=Oe(),n=Object(s.g)(),c=r.a.useState(!1),o=Object(T.a)(c,2),i=o[0],l=o[1],u=r.a.useContext(ge).deleteProject,m=e.project,p=e.id;return i?null:r.a.createElement(X.a,{className:a.item},r.a.createElement(E.a,{variant:"h4",onClick:(t=p,function(){return n.push("/project/".concat(t))})},m.title),r.a.createElement(E.a,{variant:"body1"},"Posted by"," ",m.authorFirstName?m.authorLastName?"".concat(m.authorFirstName," ").concat(m.authorLastName):"".concat(m.authorFirstName):"Unknown"),r.a.createElement(E.a,{variant:"body2",className:a.date},m.createdAt&&oe()(m.createdAt.toDate()).calendar()),r.a.createElement(b.a,{onClick:function(e){return function(){l(!0),u(e)}}(p),disabled:i},r.a.createElement(fe.a,null)),r.a.createElement(b.a,{onClick:function(e){return function(){return n.push("/updateproject/".concat(e))}}(p)},r.a.createElement(be.a,null)))},Te=Object(p.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(1)}}})),we=function(){var e=Te(),t=r.a.useContext(ge),a=t.projects,n=t.getProjects;return r.a.useEffect((function(){n()}),[n]),a&&0===Object.keys(a).length?r.a.createElement("div",{className:e.root},r.a.createElement(E.a,{variant:"h4"},"Loading Projects ..."),r.a.createElement(pe.a,null)):r.a.createElement("div",{className:e.root},a&&Object.keys(a).map((function(e){return r.a.createElement(xe,{key:e,id:e,project:a[e]})})))},ke=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"row"},projectList:{margin:e.spacing(1),width:"100%"},notifications:{width:"100%",margin:e.spacing(1)}}})),Ie=function(){var e=ke(),t=r.a.useContext($).auth;return t.redirect?r.a.createElement(s.a,{to:"/signin"}):t.user?r.a.createElement("div",{className:e.root},r.a.createElement(X.a,{className:e.projectList},r.a.createElement(we,null)),r.a.createElement(X.a,{className:e.notifications},r.a.createElement(me,null))):null},Re=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2),margin:e.spacing(1)},form:{display:"flex",flexDirection:"column"},input:{width:500},button:{marginTop:e.spacing(1),backgroundColor:Object(v.b)(e.palette.common.black,.1),"&:hover":{backgroundColor:Object(v.b)(e.palette.common.black,.25)}}}})),Ce=function(){var e=Re(),t=Object(s.h)().id,a=Object(s.g)(),n=Object(Q.a)(),c=n.handleSubmit,o=n.register,i=n.errors,l=r.a.useContext(ge),u=l.projects,m=l.createProject,p=l.updateProject,d=r.a.useContext($).auth,f=u[t],b=function(){var e=Object(x.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,p(Object(w.a)({},u[t],{},n),t);case 3:e.next=7;break;case 5:return e.next=7,m(n,d.user);case 7:a.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.user||a.push("/signin"),r.a.createElement("div",{className:e.root},r.a.createElement(X.a,{className:e.paper},r.a.createElement(E.a,{variant:"h4"},f?"Edit":"New"," Project"),r.a.createElement("form",{onSubmit:c(b),className:e.form},r.a.createElement(ee.a,{label:"Title",className:e.input,defaultValue:f?f.title:"",inputProps:{name:"title"},inputRef:o({required:"Required"}),helperText:i.title?i.title.message:null}),r.a.createElement(ee.a,{multiline:!0,rows:"4",label:"Content",className:e.input,defaultValue:f?f.content:"",inputProps:{name:"content"},inputRef:o({required:"Required"}),helperText:i.content?i.content.message:null}),r.a.createElement(j.a,{color:"inherit",type:"submit",className:e.button},f?"Update":"Create"))))},ye=a(140),Ae=Object(p.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(1),margin:e.spacing(1)},date:{color:Object(v.b)(e.palette.common.black,.6)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(1)}}})),Pe=function(){var e=Ae(),t=Object(s.h)().id,a=r.a.useContext(ge).projects[t],n=r.a.useContext($).auth,c=Object(s.g)();return n.user||c.push("/signin"),a?r.a.createElement(X.a,{className:e.root},r.a.createElement(E.a,{variant:"h4"},a.title),r.a.createElement(E.a,{variant:"body1"},a.content),r.a.createElement(ye.a,{className:e.divider}),r.a.createElement(E.a,{variant:"subtitle1"},"Posted by ",a.authorFirstName," ",a.authorLastName),r.a.createElement(E.a,{variant:"subtitle2",className:e.date},a.createdAt&&oe()(a.createdAt.toDate()).calendar())):r.a.createElement(E.a,{variant:"h4"},"Loading project!")},Se=Object(l.a)();var _e=function(){return r.a.createElement(u.a,{theme:Se},r.a.createElement(W,null,r.a.createElement(Ne,null,r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null),r.a.createElement(M,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/signin"},r.a.createElement(ae,null)),r.a.createElement(s.b,{path:"/signup"},r.a.createElement(re,null)),r.a.createElement(s.b,{path:"/createproject"},r.a.createElement(Ce,null)),r.a.createElement(s.b,{path:"/updateproject/:id"},r.a.createElement(Ce,null)),r.a.createElement(s.b,{path:"/project/:id"},r.a.createElement(Pe,null)),r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(Ie,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[80,1,2]]]);
//# sourceMappingURL=main.686afd62.chunk.js.map